# TestData Buddy - プロジェクト構成

## 📁 推奨ディレクトリ構造

```
td-buddy-app/
├── packages/
│   ├── common/                 # 共通型定義・ユーティリティ
│   │   ├── src/
│   │   │   ├── types/         # MCP プロトコル型定義
│   │   │   ├── schemas/       # バリデーションスキーマ
│   │   │   └── utils/         # 共通ユーティリティ
│   │   └── package.json
│   │
│   ├── frontend/              # Remix Web UI
│   │   ├── app/
│   │   │   ├── components/    # UIコンポーネント
│   │   │   ├── routes/        # ページルート
│   │   │   ├── services/      # API呼び出しサービス
│   │   │   └── utils/         # フロントエンド用ユーティリティ
│   │   ├── public/
│   │   └── package.json
│   │
│   ├── backend/               # NestJS MCPサーバー
│   │   ├── src/
│   │   │   ├── modules/       # 機能別モジュール
│   │   │   │   ├── password/  # パスワード生成
│   │   │   │   ├── file/      # ファイル生成
│   │   │   │   ├── personal/  # 個人情報生成
│   │   │   │   ├── ai/        # Claude API連携
│   │   │   │   └── mcp/       # MCPプロトコルハンドラー
│   │   │   ├── database/      # SQLite接続・エンティティ
│   │   │   ├── common/        # 共通サービス・デコレーター
│   │   │   └── main.ts
│   │   └── package.json
│   │
│   └── cursor-extension/      # Cursor連携拡張（将来）
│       ├── src/
│       ├── manifest.json
│       └── package.json
│
├── docs/                      # ドキュメント
│   ├── architecture/          # アーキテクチャ設計書
│   ├── api/                   # API仕様書
│   ├── development/           # 開発ガイド
│   └── user-guide/            # ユーザーガイド
│
├── tools/                     # 開発ツール・スクリプト
│   ├── scripts/               # ビルド・デプロイスクリプト
│   └── docker/                # Docker設定（オプション）
│
├── data/                      # 生成データ・設定ファイル
│   ├── templates/             # テンプレートファイル
│   ├── generated/             # 生成されたファイル
│   └── database.sqlite        # SQLiteデータベース
│
├── pnpm-workspace.yaml        # pnpm workspace設定
├── package.json               # ルートpackage.json
├── .env.example              # 環境変数テンプレート
└── README.md                  # プロジェクト概要
```

## 🔧 セットアップスクリプト

### package.json (ルート)
```json
{
  "name": "testdata-buddy",
  "private": true,
  "scripts": {
    "dev": "concurrently \"pnpm -F backend dev\" \"pnpm -F frontend dev\"",
    "build": "pnpm -r build",
    "start": "concurrently \"pnpm -F backend start\" \"pnpm -F frontend start\"",
    "test": "pnpm -r test",
    "lint": "pnpm -r lint",
    "setup": "pnpm install && pnpm -F backend db:migrate"
  },
  "devDependencies": {
    "concurrently": "^8.2.2",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "prettier": "^3.0.0"
  }
}
```

### pnpm-workspace.yaml
```yaml
packages:
  - 'packages/*'
```

## 📋 必要な設定ファイル

### .env.example
```env
# Claude API
CLAUDE_API_KEY=your_claude_api_key_here

# Database
DATABASE_URL=file:./data/database.sqlite

# Server
PORT=3001
NODE_ENV=development

# Frontend
REMIX_DEV_SERVER_WS_PORT=8002
```

### .gitignore
```gitignore
# Dependencies
node_modules/
.pnpm-store/

# Environment variables
.env
.env.local

# Database
data/database.sqlite
data/generated/*

# Build outputs
dist/
build/
.remix/

# Logs
*.log
logs/

# OS
.DS_Store
Thumbs.db

# IDE
.vscode/
.idea/
```

## 🚀 開発開始手順

1. **環境セットアップ**
   ```bash
   git clone <repository>
   cd td-buddy-app
   cp .env.example .env
   # .envファイルを編集してAPIキーを設定
   ```

2. **依存関係インストール**
   ```bash
   pnpm install
   ```

3. **データベース初期化**
   ```bash
   pnpm -F backend db:migrate
   ```

4. **開発サーバー起動**
   ```bash
   pnpm dev
   ```

## 📚 追加推奨ファイル

- `docs/api/swagger.yaml` - API仕様書
- `docs/architecture/mcp-protocol.md` - MCPプロトコル詳細
- `docs/development/setup-guide.md` - 開発環境構築ガイド
- `packages/common/src/types/mcp-types.ts` - MCP型定義
- `tools/scripts/generate-types.js` - 型定義生成スクリプト 