# 🎯 TestData Buddy 開発方針統一ガイド

**🤖 TDからの重要なお知らせ：**
*「プロジェクトの方向性を統一するため、重要な決定事項をまとめました！」*

## 🚀 プロジェクトの最終形態

### 確定した構成
TestData Buddyは **VSCode/Cursor拡張機能** として開発することを正式決定します。

```
最終形態: VSCode Extension
├── 主要機能: IDE内でのテストデータ生成
├── AI連携: Claude API統合
├── Cursor統合: MCPプロトコル活用
└── 配布方法: VSCode Marketplace
```

**🤖 TDの判断理由：**
*「WebアプリよりもIDE統合の方が、開発者の日常ワークフローに自然に溶け込めるからです！」*

## 📋 既存ドキュメントの修正対応

### 🔴 即座に修正が必要（開発に直接影響）

#### 1. **01_development_setup.md**
- **現状**: pnpm workspace構成、Webアプリ前提
- **修正必要**: VSCode拡張機能開発環境に変更

#### 2. **07_solo_development_workflow.md**
- **現状**: monorepo前提のワークフロー
- **修正必要**: 拡張機能開発ワークフローに変更

#### 3. **10_user_guide.md**
- **現状**: Electronアプリとしての使用方法
- **修正必要**: VSCode拡張機能としての使用方法

### 🟡 段階的に修正（機能拡張時）

#### 4. **08_testing_strategy.md**
- **現状**: Web API中心のテスト戦略
- **修正必要**: VSCode拡張機能テストの追加

#### 5. **03_database_schema.sql**
- **現状**: 大型データベース設計
- **修正必要**: 拡張機能のlocalStorage/globalState前提に変更

## 🏗️ 新しいプロジェクト構造

### ディレクトリ構成（確定版）
```
td-buddy-app/
├── src/                          # メインソースコード
│   ├── extension.ts              # 拡張機能エントリーポイント
│   ├── commands/                 # VSCodeコマンド
│   ├── providers/                # TreeView、ウェブビュープロバイダー
│   ├── services/                 # 各種サービス（パスワード生成等）
│   ├── ai/                       # Claude AI連携
│   ├── mcp/                      # MCP Server実装
│   └── types/                    # TypeScript型定義
├── media/                        # アイコン、CSS等の静的ファイル
├── package.json                  # VSCode拡張機能のマニフェスト
├── tsconfig.json                 # TypeScript設定
├── webpack.config.js             # バンドル設定
├── .vscodeignore                 # パッケージ除外設定
└── docs/                         # ドキュメント
```

### package.json（拡張機能版）
```json
{
  "name": "testdata-buddy",
  "displayName": "TestData Buddy",
  "description": "🤖 AI-powered test data generation for QA engineers",
  "version": "1.0.0",
  "publisher": "testdata-buddy",
  "engines": {
    "vscode": "^1.80.0"
  },
  "categories": ["Other"],
  "activationEvents": [],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "testdata-buddy.generate.password",
        "title": "🔐 Generate Password",
        "category": "TestData Buddy"
      }
    ],
    "views": {
      "testdata-buddy": [
        {
          "id": "testdata-buddy-main",
          "name": "TD Generator",
          "when": "true"
        }
      ]
    },
    "viewsContainers": {
      "activitybar": [
        {
          "id": "testdata-buddy",
          "title": "TestData Buddy",
          "icon": "$(robot)"
        }
      ]
    }
  },
  "dependencies": {
    "better-sqlite3": "^8.7.0",
    "@anthropic-ai/sdk": "^0.24.3"
  },
  "devDependencies": {
    "@types/vscode": "^1.80.0",
    "typescript": "^5.2.0",
    "webpack": "^5.89.0"
  }
}
```

## 🔧 技術スタックの最終決定

### コア技術
| 分野 | 技術 | 理由 |
|------|------|------|
| **拡張機能フレームワーク** | VSCode Extension API | 主要ターゲット環境 |
| **言語** | TypeScript | 型安全性、VSCode連携 |
| **AI** | Claude API (Anthropic) | 高品質な自然言語処理 |
| **データベース** | better-sqlite3 | 軽量、ローカル完結 |
| **Cursor統合** | MCP Protocol | Cursor公式サポート |
| **バンドル** | Webpack | VSCode推奨 |
| **テスト** | Jest + @vscode/test-runner | 拡張機能特化 |

### 依存関係管理
```bash
# パッケージマネージャー: npm（拡張機能開発のスタンダード）
npm install  # pnpmではなくnpmを使用

# bundledDependencies使用
# ネイティブモジュールを拡張機能に同梱
```

## 🎨 TDキャラクター統合指針

### 拡張機能でのTD表現

#### 1. **アクティビティバーアイコン**
```typescript
// package.jsonで指定
"icon": "$(robot)"  // VSCodeビルトインアイコン

// またはカスタムアイコン
"icon": "media/td-icon.svg"
```

#### 2. **コマンドメッセージ**
```typescript
// コマンド実行時のTDメッセージ
vscode.window.showInformationMessage(
  "🤖 TDがパスワードを生成しました！クリップボードにコピーしましたよ♪"
);
```

#### 3. **WebViewでのキャラクター表示**
```typescript
// HTML内でTDキャラクターを表示
const webviewContent = `
  <div class="td-character">
    <pre>( ^.^ )</pre>
    <pre> > v < </pre>
    <p>今日はどんなデータを作りましょうか？</p>
  </div>
`;
```

## 📚 ドキュメント修正計画

### Phase 1: 緊急修正（開発開始前）
1. ✅ **開発方針統一ガイド.md** - 作成完了
2. 🔄 **01_development_setup.md** - VSCode拡張機能版に修正
3. 🔄 **10_user_guide.md** - 拡張機能使用方法に修正

### Phase 2: 段階的修正（開発中）
4. 🔄 **07_solo_development_workflow.md** - 拡張機能開発ワークフローに修正
5. 🔄 **08_testing_strategy.md** - 拡張機能テスト戦略追加
6. 🔄 **03_database_schema.sql** - 軽量スキーマに変更

### Phase 3: 補完（機能拡張時）
7. 📝 **VSCode拡張機能開発ガイド.md** - 新規作成
8. 📝 **MCP統合実装ガイド.md** - 技術詳細
9. 📝 **リリース・配布ガイド.md** - Marketplace公開手順

## 🎯 開発優先順位

### 1. **MVP機能（2週間）**
```
優先度1: パスワード生成
├── VSCodeコマンド登録
├── 基本UI（WebView）
├── クリップボード連携
└── TDキャラクター表示

優先度2: 個人情報生成
├── 日本語データ生成
├── CSVエクスポート
└── 設定保存機能
```

### 2. **AI統合（2週間）**
```
優先度3: Claude API連携
├── 自然言語解析
├── データ生成指示
└── エラーハンドリング

優先度4: Cursor MCP統合
├── MCP Server実装
├── プロトコル通信
└── IDE連携テスト
```

### 3. **拡張機能配布（1週間）**
```
優先度5: 公開準備
├── VSIXパッケージ生成
├── Marketplace登録
└── ドキュメント最終更新
```

## 🤖 TDからの最終メッセージ

**🤖 「みなさん、重要な決定ができました！」**

*この統一ガイドに従って、TestData BuddyをVSCode拡張機能として開発していきます。*

*既存ドキュメントの修正も順次進めますが、まずは開発環境の構築から始めましょう。*

*一緒に、QAエンジニアの皆様に愛される最高のツールを作り上げましょう！*

## 📋 次のアクション

### 開発者向け即座対応
1. **package.json作成** - VSCode拡張機能マニフェスト
2. **開発環境構築** - TypeScript + Webpack設定
3. **基本コマンド実装** - パスワード生成コマンド

### ドキュメント修正順序
1. **01_development_setup.md** - 拡張機能開発環境
2. **10_user_guide.md** - 拡張機能使用方法
3. **07_solo_development_workflow.md** - 拡張機能開発フロー

**🤖 「準備完了です！開発を始めましょう♪」** 