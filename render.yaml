# QA Workbench (TestData Buddy) - Render ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š
# ğŸº Brewsã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆæ­è¼‰ QAã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å°‚ç”¨ä½œæ¥­å°

services:
  # ğŸŒ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆNext.jsï¼‰
  - type: web
    name: qa-workbench-frontend
    runtime: node
    plan: free # ç„¡æ–™ãƒ—ãƒ©ãƒ³ã‹ã‚‰é–‹å§‹ï¼ˆå¾Œã§å¤‰æ›´å¯èƒ½ï¼‰
    buildCommand: |
      cd td-buddy-webapp/frontend
      npm ci
      npm run build
    startCommand: |
      cd td-buddy-webapp/frontend
      npm start
    healthCheckPath: /
    envVars:
      - key: NODE_ENV
        value: production
      - key: NEXT_PUBLIC_API_URL
        fromService:
          type: web
          name: qa-workbench-backend
          property: host
      - key: NEXT_PUBLIC_APP_ENV
        value: production

  # ğŸ”§ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆNode.js/Expressï¼‰
  - type: web
    name: qa-workbench-backend
    runtime: node
    plan: free # ç„¡æ–™ãƒ—ãƒ©ãƒ³ã‹ã‚‰é–‹å§‹
    buildCommand: |
      cd td-buddy-webapp/backend
      npm ci
      npm run build
    startCommand: |
      cd td-buddy-webapp/backend
      npm run start
    healthCheckPath: /api/health
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000 # Renderã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆ
      - key: DATABASE_URL
        fromDatabase:
          name: qa-workbench-db
          property: connectionString
      - key: FRONTEND_URL
        fromService:
          type: web
          name: qa-workbench-frontend
          property: host
      # ğŸ”‘ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šï¼ˆRenderç®¡ç†ç”»é¢ã§è¨­å®šï¼‰
      - key: SECRET_KEY
        sync: false # ç®¡ç†ç”»é¢ã§æ‰‹å‹•è¨­å®š
      - key: JWT_SECRET
        sync: false # ç®¡ç†ç”»é¢ã§æ‰‹å‹•è¨­å®š
      - key: CLAUDE_API_KEY
        sync: false # ç®¡ç†ç”»é¢ã§æ‰‹å‹•è¨­å®š

# ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆPostgreSQLï¼‰
databases:
  - name: qa-workbench-db
    databaseName: qa_workbench
    plan: free # ç„¡æ–™PostgreSQLï¼ˆ100MBï¼‰
