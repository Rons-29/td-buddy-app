// 青空文庫作品サンプルデータ
// TestData Buddy - ファイル容量テスト用の実際のテキストコンテンツ
// パブリックドメイン作品を基にしたサンプル

export interface AozoraBunkoWork {
  id: string;
  title: string;
  author: string;
  content: string;
  publicDomain: boolean;
  originalSource: string;
  description: string;
}

export const AOZORA_BUNKO_SAMPLES: AozoraBunkoWork[] = [
  {
    id: 'wagahai-neko',
    title: '吾輩は猫である（冒頭）',
    author: '夏目漱石',
    content: `吾輩は猫である。名前はまだ無い。

どこで生れたかとんと見当がつかぬ。何でも薄暗いじめじめした所でニャーニャー泣いていた事だけは記憶している。吾輩はここで始めて人間というものを見た。しかもあとで聞くとそれは書生という人間中で一番獰悪な種族であったそうだ。この書生というのは時々我々を捕えて煮て食うという話である。しかしその当時は何という考もなかったから別段恐しいとも思わなかった。ただ彼の掌に載せられてスーと持ち上げられた時何だかフワフワした感じがあったばかりである。

掌の上で少し落ちついて書生の顔を見たのがいわゆる人間というものの見始であろう。この時妙なものだと思った感じが今でも残っている。第一毛をもって装飾されべきはずの顔がつるつるしてまるで薬缶だ。その後猫にもだいぶ逢ったがこんな片輪には一度も出会わした事がない。のみならず顔の真中があまりに突起している。そうしてその穴の中から時々ぷうぷうと煙を吹く。どうも咽せぽくて実に弱った。これが人間の飲む煙草というものである事はずっと後になって知った。

この書生の掌の裏でしばらくはよい心持に坐っておったが、しばらくすると非常な速力で運転し始めた。書生が動くのか自分が動くのか分らないが無暗に眼が廻る。胸が悪くなる。到底助からないと思っていると、どさりと音がして眼から火が出た。それまでは記憶しているがあとは何の事やらいくら考え出そうとしても分らない。

人間と名のつくものはそんなに無慈悲なものかしらん。

彼等は我等を捕えて愛してくれるかと思いきや、そうではない。実に残酷なのは彼等の本性なのかもしれない。しかし、その一方で猫を愛でる人間も多い。複雑な生き物である、人間というものは。

吾輩が彼等の本性を知ったのは、ある雨の夜のことである。主人とその妻が、吾輩について語っているのを偶然耳にした。「あの猫、なかなか賢そうですね」と妻が言うと、主人は「そうだな、まるで人間の言葉が分かるような顔をしている」と答えた。

もちろん、吾輩には人間の言葉がよく分かる。ただ、話すことができないだけだ。これは猫の宿命というものかもしれない。しかし、観察することにおいては、猫は人間よりもずっと優秀である。

吾輩の名前がないのは、主人が名前を付けるのを忘れているからである。いや、忘れているのではない。面倒臭がっているのだ。人間というものは、本当に面倒臭がりな生き物である。`,
    publicDomain: true,
    originalSource: '青空文庫 https://www.aozora.gr.jp/',
    description:
      '夏目漱石の代表作「吾輩は猫である」の冒頭部分。猫の視点から人間社会を観察する名作。',
  },
  {
    id: 'kokoro',
    title: 'こころ（冒頭）',
    author: '夏目漱石',
    content: `私はその人を常に先生と呼んでいた。だからここでもただ先生と書くだけで本名は打ち明けない。これは世間を憚かる遠慮というよりも、その方が私にとって自然だからである。私はその人の記憶を呼び起すごとに、すぐ「先生」といいたくなる。筆を執っても心持は同じ事である。よそよそしい頭文字などはとても使う気にならない。

私が先生と知り合いになったのは鎌倉である。その時私はまだ若い大学生であった。暑中休暇を利用して海水浴に行った友達からぜひ来いという端書を受け取ったので、私は多少の金を工面して、出掛ける事にした。私は金の工面に二、三日を費やした。ところが私が鎌倉に着いて三日と経たないうちに、私を呼び寄せた友達は、急に国元から帰れという電報を受け取った。電報には母が病気だからと断ってあったけれども友達はそれを信じなかった。友達はかねてから国元にいる親たちに勧まない結婚を強いられていた。彼は現代の習慣からいうと結婚するにはあまり年が若過ぎた。それに肝心の当人が気に入らなかった。それで夏休みに当然帰るべきところを、わざと避けて東京の近くで遊んでいたのである。彼は電報を私に見せてどうしようと相談をした。私にはどうしていいか分らなかった。

けれども私はどうしても鎌倉にいたかった。私は友達と別れてから、一人で海水浴を続ける勇気を持っていた。その時海水浴といえば江の島と相場がきまっていたものだから、私も行こうかと思った。しかし知った人に会うのが厭だった私は、人の少ない鎌倉の海岸を選んだ。

私は毎日海に入った。古い燻し銀の日に焼けながら、浜辺に寝そべって本を読む事もあった。私は腹の減った時だけ宿に帰って食事をした。宿は鶴ヶ岡の近くにあった。私は若い時の習慣で、人の世話にならないでも生きて行けそうな気がしていた。殊に父が亡くなってからというものは、この態度がなお強くなった。私は先生に出会うまで、自分の力を信じて疑わなかった。

ある日の午後、私は海岸で先生に出会った。その時海は比較的静かであった。しかし太陽の光が強かったので、眼を開けていると頭痛がした。私は頭を砂の上に埋めて、海の音を聞いていた。すると突然誰かが私の名前を呼んだような気がした。私は驚いて顔を上げて見回した。しかし誰もいなかった。私の聞き間違いだったかもしれない。

その時私は砂の上に一人の男の人が立っているのを見た。その人は私から少し離れたところにいて、じっと海を見つめていた。その人が先生である。`,
    publicDomain: true,
    originalSource: '青空文庫 https://www.aozora.gr.jp/',
    description:
      '夏目漱石の代表作「こころ」の冒頭部分。明治の学生と先生との交流を描いた心理小説。',
  },
  {
    id: 'rashomon',
    title: '羅生門',
    author: '芥川龍之介',
    content: `ある日の暮方の事である。一人の下人が羅生門の下で雨やみを待っていた。

広い門の下には、この男のほかに誰もいない。ただ、所々丹塗の剥げた、大きな円柱に、蟋蟀が一匹とまっている。羅生門が、朱雀大路にある以上は、この男のほかにも、雨やみを待っている人があってもよさそうなものである。それが、この男のほかには誰もいない。

何故かと云うと、この二三年、京都には、地震とか辻風とか火事とか饑饉とかいう災いがつづいて起った。そこで洛中のさびれ方は一通りでない。旧記によると、仏像や仏具を打砕いて、その丹がついたり、金銀の箔がついたりした木を、路ばたに積んで薪の料に売っていたという事である。洛中がその始末であるから、羅生門の修理などは、元より誰も捨てて顧る者がなかった。するとその荒れ果てたのをよい事にして、狐狸が棲む。盗人が棲む。とうとうしまいには、引取手のない死人を、この門へ持って来て、捨てて行くという習慣さえ出来た。そこで、日の目が見えなくなると、誰でも気味を悪がって、この門の近所へは足ぶみをしない事になってしまった。

その代りまた鴉がたくさん集って来た。昼間見ると、その鴉が何羽となく輪を描いて、高い鴟尾の廻りを啼きながら飛んでいる。ことに門の上の空が、夕焼でも赤くなる時には、それが胡麻をまいたようにはっきり見えた。鴉は、勿論、門の上にある死人の肉を、啄みに来るのである。――もっとも今日は、刻限が遅いせいか、一羽も見えない。

ただ、所々、崩れかかった、そうしてその崩れ目に長い草の生えた石段の上に、鴉の糞が、点々と白く落ちているのが見える。下人は七段ある石段の一番上の段に、洗いざらした藍の袴の尻を据えて、右の頬に出来た、大きな面皰を気にしながら、ぼんやりと雨のふるのを眺めていた。

作者はさっき、「下人が雨やみを待っていた」と書いた。しかし、下人は雨がやんでも、格別どうしようという当てがあるわけではない。ふだんなら、勿論、主人の家へ帰る可きところである。所が、その主人からは、四五日前に暇を出された。前にも書いたように、当時京都の町は一通りならず衰微していた。今この下人が、永年、使われていた主人からも、やはりその衰微の波を受けて、主従の縁を切られたのである。だから「下人が雨やみを待っていた」と云うよりも「雨にふりこめられた下人が、行き所がなくて、途方にくれていた」と云う方が、適当である。その上、今日の空模様も少からず、この平安朝の下人の Sentimentalisme に影響した。申の刻下りからふり出した雨は、未だに上る気色がない。そこで、下人は、何をおいても差当り明日の暮しをどうにかしようとして――云わばどうにもならない事を、どうにかしようとして、とりとめもない考えをたどりながら、さっきから朱雀大路にふる雨の音を、聞いているのである。

雨は、羅生門をつつんで、遠くから、ざあっと云う音をたてて来る。夕闇は次第に空を低くして、見上げると、門の屋根が、重たい雲の重みに今にも押し潰されそうである。

にわかに風が出て来て、門の屋根にある鴟尾を鳴らした。雨はひとしきり、門の朱塗の柱を伝って、白い筋になって流れた。`,
    publicDomain: true,
    originalSource: '青空文庫 https://www.aozora.gr.jp/',
    description:
      '芥川龍之介の代表作「羅生門」。平安末期の京都を舞台にした短編小説。',
  },
  {
    id: 'gingatetsudo',
    title: '銀河鉄道の夜（冒頭）',
    author: '宮沢賢治',
    content: `「ではみなさんは、そういうふうに川だと云われたり、乳の流れたあとだと云われたりしていたこのぼんやりと白いものがほんとうは何かご承知ですか。」先生は、黒板に吊した大きな黒い星座の図の、上から下へ白くけぶった銀河帯のようなところを指しながら、みんなに問をかけました。

カムパネルラが手をあげました。それから四五人手をあげました。ジョバンニも手をあげようとして、急いでそのままやめました。たしかにあれがみんな星だと、いつか雑誌で読んだのでしたが、このごろはジョバンニはまるで毎日教室でもねむく、本を読むひまも読む本もないので、なんだかどんなこともよくわからないという気持ちがするのでした。

「はい。」カムパネルラが立ちました。

「あれは天の川だと思います。」

「天の川というのは川の名前ですね。では天の川の正体は何ですか。」先生がまたききました。

カムパネルラが答えようとして立ったまま、もじもじしていました。

「はい。」別の子が手をあげました。

「あれは星です。」

「そうです。では、あのようにちらちらと音もなく流れていて、しかもどこまで行ってもきりのないもので、そしてそのきれいなさまは、何に似ているでしょう。」

「雲です。」一人の子がいいました。

「いいえ。」先生は首を振りました。「もう一つ大切なことがあります。それは、あの水と光の流れていること、またそれがほんとうにみんなの中に流れているということです。」

そのとき、ジョバンニは、なんだか不思議な気がしました。そしてにわかに教室の中が、がらんとして、まるで鳥のようにひとりでに空に舞いあがって行くような気がしました。

「それで、今夜は、みなさんは、よく空をごらんなさい。ことに注意して見てほしいのは、天の川のところです。先生は今夜、みなさんに宿題を出します。天の川を見て、そこで何を感じたか、そのことを明日きかせてください。」

ジョバンニは、なんだかそわそわしてきました。天の川をよく見ろということでしたが、ジョバンニは、天の川のことを考えるたびに、なぜだかせつない気持ちになるのでした。それに、いつも母さんが病気で寝ていて、お父さんはどこか遠いところに行ってしまって、もう一年以上も帰ってこないのでした。

そうこうするうちに、授業は終り、みんなは帰りじたくをはじめました。ジョバンニも手早く本をかばんに入れて、教室を出ました。そして学校の門を出ると、すぐに町の活版所へ向かって歩いて行きました。活版所では、ジョバンニは学校が終ると毎日働いていたのです。

活版所の前を通りかかった時、中から親方の大きな声が聞こえました。

「おい、ジョバンニ、今日は少し遅いぞ。」

「すみません。」ジョバンニは急いで中に入りました。

活版所の中は、インクの匂いでいっぱいでした。大きな機械がごとごとと音をたてて動いていて、親方とほかの職人さんたちが忙しそうに働いていました。ジョバンニは、いつものように、文字を拾う仕事を始めました。`,
    publicDomain: true,
    originalSource: '青空文庫 https://www.aozora.gr.jp/',
    description:
      '宮沢賢治の代表作「銀河鉄道の夜」の冒頭部分。幻想的な世界を描いた名作。',
  },
  {
    id: 'takase-bune',
    title: '高瀬舟',
    author: '森鴎外',
    content: `高瀬舟は京都の高瀬川を上下する小舟である。德川時代に京都の罪人が遠島を申し付けられると、先ず傳馬町の牢屋敷に送られて、それから此舟で大坂へ下された。これも昔の事で、今は此舟は旅客を載せて走つてゐる。

喜助といふ男が罪を犯して島流しになることになつた。喜助は何をした男かといふと、ある晩弟を殺したのである。殺したといふよりは、實は弟が自分で死にたいと云つたのを、喜助が殺してやつたのである。これを安樂死といふのであらうか。今の法律でいへば、自殺幇助といふことになるのであらうか。兎に角喜助は弟殺しの罪で遠島になることになつた。

喜助の弟は久しく煩つてゐた。足に大きな腫物が出來て、痛んで痛んでたまらない。醫者にも見せたが何の甲斐もない。夜も眠れず、飯も食へないで、やせ衰へて、殆ど骨と皮ばかりになつてしまつた。そして毎日兄の喜助に向つて死にたい死にたいと訴へた。

「兄さん。わしはもう生きてゐるのが辛くて辛くてたまらない。どうぞ殺してくれ。頼む。」

弟はかう云つて手を合はせて拝むやうに頼んだ。喜助は始めの中は何とかして慰めようとしたが、弟の苦しみは日に日に募るばかりで、たうとう見てゐられなくなつた。

ある夜、弟がまた例の通り苦しがつて、殺してくれ殺してくれと頼んだ時、喜助はたうとう決心した。弟が苦しんでゐるのを見てゐるのは、自分も同じやうに辛い。いつそ楽にしてやらうと思つた。

喜助は戸棚から短刀を取り出した。弟はそれを見ると、安心したやうな顔をして、有難う有難うと云つた。そして兄さんの手を握つて、後のことを頼むと云つた。後のこととは自分の墓のことである。

「兄さん。わしが死んだら、墓に花を供へてくれ。」

喜助は涙を流しながら頷いた。そして短刀で弟の首をつき刺した。弟は一声も立てずに死んだ。まるで安らかに眠りについたやうであつた。

その翌朝、喜助は自分で奉行所に出頭した。そして弟を殺したことを告白した。奉行所の役人たちは喜助の話を聞いて、これは珍しい事件だと思つた。弟の病氣のことも調べてみると、喜助の云つた通りであつた。近所の人たちも、弟の苦しみやうを見てゐて、気の毒に思つてゐたと證言した。

しかし、理由がどうあれ、人を殺したことには違ひがない。喜助は遠島の刑を申し付けられた。

高瀬舟に乗せられて大坂へ下つて行く時、喜助は不思議に心が軽かつた。弟を楽にしてやつたといふ満足感があつた。そして自分も罪の報いを受けるのだから、これで良いのだと思つた。

護送の役人は羽田庄兵衞といふ男であつた。庄兵衞は喜助の話を聞いて、深く考へ込んだ。これは果たして悪いことなのだらうかと思つた。苦しんでゐる人を楽にしてやるのは、慈悲ではないかとも思つた。

高瀬舟は静かに高瀬川を下つて行つた。`,
    publicDomain: true,
    originalSource: '青空文庫 https://www.aozora.gr.jp/',
    description: '森鴎外の代表作「高瀬舟」。安楽死をテーマにした短編小説。',
  },
  {
    id: 'hashire-melos',
    title: '走れメロス（冒頭）',
    author: '太宰治',
    content: `メロスは激怒した。必ず、かの邪智暴虐の王を除かなければならぬと決意した。メロスには政治がわからぬ。メロスは、村の牧人である。笛を吹き、羊と遊んで暮して来た。けれども邪悪に対しては、人一倍に敏感であった。きょう未明メロスは村を出発し、野を越え山越え、十里はなれた此のシラクスの市にやって来た。メロスには父も、母も無い。女房も無い。十六の、内気な妹と二人暮しである。この妹は、村の或る律気な一牧人を、近々、花婿として迎える事になっていた。結婚式も間近かなのである。メロスは、それゆえ、花嫁の衣裳やら祝宴の御馳走やらを買いに、はるばる市にやって来たのである。先ず、その品々を買い集め、それから都の大路をぶらぶら歩いた。メロスには竹馬の友があった。セリヌンティウスである。今は此のシラクスの市で、石工をしている。その友を、これから訪ねてみるつもりなのである。久しく逢わなかったのだから、訪ねて行くのが楽しみである。歩いているうちにメロスは、まちの様子を怪しく思った。ひっそりしている。もう既に日も落ちて、まちの暗いのは当りまえだが、けれども、なんだか、夜のせいばかりでは無い様に思われた。市民たちの顔に暗い影が宿っているのである。

のぞいてみると、どの店も暗い。人々は、足早に歩いている。まるで、何かに怯えているようである。まちの様子がへんだ、とメロスは思った。のんきなメロスも、だんだん不安になって来た。子供にきいてみた。

「なぜ、みんな、そんなに急いでいるのです。」

子供は、答えなかった。不審に思いながら、メロスは歩いた。広場に出た。広場は森閑として、一人の人影も無い。日頃は、劇や踊りが催されて、いつも人々が群集しているのに、今は、まるで死んだようになっている。メロスは立ちどまって、誰かいないかと、辺りを見廻した。一人の若い衆が、広場の隅の方から、そろそろ出て来た。

「ちょっと、そこの人。」

声をかけると、若い衆は、ぎょっとしたような顔をして振り向き、そうして、また何か怯えている様子で、

「何か？」

「この市は、どうかしたのですか。まるで、お通夜のようですが。」

「知らぬか？」若い衆は、きょろきょろあたりを見廻してから、声をひそめて云った。「この頃、王様は、人を殺すのです。」

「なぜ殺すのです。」

「悪心を抱いている、というのが王様のお考えです。悪心を抱いているものは、早目に殺してしまえ、と王様は、そういうお考えなのです。」

「そんな、ばかな。」メロスは、呆れた。「悪心を抱いている証拠があるのですか。」

「いえ、ありません。王様は、ただおうたがいになっているだけです。疑いをかけられた人は、即座に殺されてしまいます。今では、何の罪も無い多くの人たちが殺されました。恐ろしい王様です。」

「だまって聞いていれば！」

メロスは、もう我慢ができなくなった。`,
    publicDomain: true,
    originalSource: '青空文庫 https://www.aozora.gr.jp/',
    description:
      '太宰治の代表作「走れメロス」の冒頭部分。友情と信義をテーマにした名作。',
  },
];

/**
 * 指定されたIDの作品を取得
 */
export function getAozoraBunkoWork(id: string): AozoraBunkoWork | undefined {
  return AOZORA_BUNKO_SAMPLES.find(work => work.id === id);
}

/**
 * 複数の作品を指定してコンテンツを結合
 */
export function combineAozoraBunkoWorks(ids: string[]): string {
  const works = ids
    .map(id => getAozoraBunkoWork(id))
    .filter(Boolean) as AozoraBunkoWork[];

  return works
    .map(
      work => `
【${work.title}】
作者: ${work.author}

${work.content}

出典: ${work.originalSource}
説明: ${work.description}

======================================================
`
    )
    .join('\n');
}

/**
 * ランダムな作品を指定数取得
 */
export function getRandomAozoraBunkoWorks(
  count: number = 3
): AozoraBunkoWork[] {
  const shuffled = [...AOZORA_BUNKO_SAMPLES].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, Math.min(count, AOZORA_BUNKO_SAMPLES.length));
}

/**
 * 作品の合計文字数を計算
 */
export function calculateTotalLength(ids: string[]): number {
  const content = combineAozoraBunkoWorks(ids);
  return Buffer.byteLength(content, 'utf8');
}

/**
 * 指定バイト数に最も近い作品の組み合わせを自動選択
 */
export function selectOptimalWorks(targetBytes: number): string[] {
  const allWorks = AOZORA_BUNKO_SAMPLES;
  let bestCombination: string[] = [];
  let bestDifference = Infinity;

  // すべての組み合わせを試す（2^n通り）
  for (let mask = 1; mask < 1 << allWorks.length; mask++) {
    const currentIds: string[] = [];

    for (let i = 0; i < allWorks.length; i++) {
      if (mask & (1 << i)) {
        currentIds.push(allWorks[i].id);
      }
    }

    const totalLength = calculateTotalLength(currentIds);
    const difference = Math.abs(totalLength - targetBytes);

    if (difference < bestDifference) {
      bestDifference = difference;
      bestCombination = currentIds;
    }
  }

  return bestCombination.length > 0
    ? bestCombination
    : [AOZORA_BUNKO_SAMPLES[0].id];
}
